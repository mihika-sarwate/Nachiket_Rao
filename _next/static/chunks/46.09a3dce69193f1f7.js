"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{6046:function(t,e,n){n.r(e),n.d(e,{encodeIntoResult:function(){return p},stegaEncodeSourceMap:function(){return v},stegaEncodeSourceMap$1:function(){return k}});var r=n(557);let o=/_key\s*==\s*['"](.*)['"]/;function i(t){if(!Array.isArray(t))throw Error("Path is not an array");return t.reduce((t,e,n)=>{let r=typeof e;if("number"===r)return"".concat(t,"[").concat(e,"]");if("string"===r)return"".concat(t).concat(0===n?"":".").concat(e);if(("string"==typeof e?o.test(e.trim()):"object"==typeof e&&"_key"in e)&&e._key)return"".concat(t,'[_key=="').concat(e._key,'"]');if(Array.isArray(e)){let[n,r]=e;return"".concat(t,"[").concat(n,":").concat(r,"]")}throw Error("Unsupported path segment `".concat(JSON.stringify(e),"`"))},"")}let l={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},c={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function a(t){let e;let n=[],r=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;for(;null!==(e=r.exec(t));){if(void 0!==e[1]){let t=e[1].replace(/\\(\\|f|n|r|t|')/g,t=>c[t]);n.push(t);continue}if(void 0!==e[2]){n.push(parseInt(e[2],10));continue}if(void 0!==e[3]){let t=e[3].replace(/\\(\\')/g,t=>c[t]);n.push({_key:t,_index:-1});continue}}return n}function s(t){return t.map(t=>{if("string"==typeof t||"number"==typeof t)return t;if(""!==t._key)return{_key:t._key};if(-1!==t._index)return t._index;throw Error("invalid segment:".concat(JSON.stringify(t)))})}function u(t){return"object"==typeof t&&null!==t}function p(t,e,n){return function t(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null!==e&&Array.isArray(e))return e.map((e,o)=>{if(u(e)){let i=e._key;if("string"==typeof i)return t(e,n,r.concat({_key:i,_index:o}))}return t(e,n,r.concat(o))});if(u(e)){if("block"===e._type||"span"===e._type){let o={...e};return"block"===e._type?o.children=t(e.children,n,r.concat("children")):"span"===e._type&&(o.text=t(e.text,n,r.concat("text"))),o}return Object.fromEntries(Object.entries(e).map(e=>{let[o,i]=e;return[o,t(i,n,r.concat(o))]}))}return n(e,r)}(t,(t,r)=>{if("string"!=typeof t)return t;let o=function(t,e){var n;if(!(null==e?void 0:e.mappings))return;let r=(n=t.map(t=>{if("string"==typeof t||"number"==typeof t)return t;if(-1!==t._index)return t._index;throw Error("invalid segment:".concat(JSON.stringify(t)))}),"$".concat(n.map(t=>"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,t=>l[t]),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,t=>l[t]),"')]"):"[".concat(t._index,"]")).join("")));if(void 0!==e.mappings[r])return{mapping:e.mappings[r],matchedPath:r,pathSuffix:""};let o=Object.entries(e.mappings).filter(t=>{let[e]=t;return r.startsWith(e)}).sort((t,e)=>{let[n]=t,[r]=e;return r.length-n.length});if(0==o.length)return;let[i,c]=o[0],a=r.substring(i.length);return{mapping:c,matchedPath:i,pathSuffix:a}}(r,e);if(!o)return t;let{mapping:i,matchedPath:c}=o;if("value"!==i.type||"documentValue"!==i.source.type)return t;let s=e.documents[i.source.document],u=e.paths[i.source.path],p=a(c);return n({sourcePath:a(u).concat(r.slice(p.length)),sourceDocument:s,resultPath:r,value:t})})}let d="".concat("drafts").concat("."),f="".concat("versions").concat(".");function h(t){return t.startsWith(d)}function g(t){return t.startsWith(f)}let y=t=>{let{sourcePath:e,resultPath:n,value:r}=t;if(/^\d{4}-\d{2}-\d{2}/.test(r)&&Date.parse(r)||function(t){try{new URL(t,t.startsWith("/")?"https://acme.com":void 0)}catch(t){return!1}return!0}(r))return!1;let o=e.at(-1);return!("slug"===e.at(-2)&&"current"===o||"string"==typeof o&&(o.startsWith("_")||o.endsWith("Id"))||e.some(t=>"meta"===t||"metadata"===t||"openGraph"===t||"seo"===t)||_(e)||_(n)||"string"==typeof o&&m.has(o))},m=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]);function _(t){return t.some(t=>"string"==typeof t&&null!==t.match(/type/i))}function v(t,e,n){var l,c,a,u,f,m,_,v,k;let{filter:b,logger:w,enabled:E}=n;if(!E){let r="config.enabled must be true, don't call this function otherwise";throw null==w||null===(c=w.error)||void 0===c||c.call(w,"[@sanity/client]: ".concat(r),{result:t,resultSourceMap:e,config:n}),TypeError(r)}if(!e)return null==w||null===(l=w.error)||void 0===l||l.call(w,"[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:e,config:n}),t;if(!n.studioUrl){let r="config.studioUrl must be defined";throw null==w||null===(a=w.error)||void 0===a||a.call(w,"[@sanity/client]: ".concat(r),{result:t,resultSourceMap:e,config:n}),TypeError(r)}let x={encoded:[],skipped:[]},j=p(t,e,t=>{var e;let o,{sourcePath:l,sourceDocument:c,resultPath:a,value:u}=t;if(("function"==typeof b?b({sourcePath:l,resultPath:a,filterDefault:y,sourceDocument:c,value:u}):y({sourcePath:l,resultPath:a,value:u}))===!1)return w&&x.skipped.push({path:i(s(l)),value:"".concat(u.slice(0,20)).concat(u.length>20?"...":""),length:u.length}),u;w&&x.encoded.push({path:i(s(l)),value:"".concat(u.slice(0,20)).concat(u.length>20?"...":""),length:u.length});let{baseUrl:p,workspace:f,tool:m}=("/"!==(o="string"==typeof(e="function"==typeof n.studioUrl?n.studioUrl(c):n.studioUrl)?e:e.baseUrl)&&(o=o.replace(/\/$/,"")),"string"==typeof e?{baseUrl:o}:{...e,baseUrl:o});if(!p)return u;let{_id:_,_type:v,_projectId:k,_dataset:E}=c;return(0,r.C)(u,{origin:"sanity.io",href:function(t){let{baseUrl:e,workspace:n="default",tool:r="default",id:o,type:l,path:c,projectId:a,dataset:u}=t;if(!e)throw Error("baseUrl is required");if(!c)throw Error("path is required");if(!o)throw Error("id is required");if("/"!==e&&e.endsWith("/"))throw Error("baseUrl must not end with a slash");let p="default"===n?void 0:n,f="default"===r?void 0:r,y=g(o)?o.split(".").slice(2).join("."):h(o)?o.slice(d.length):o,m=Array.isArray(c)?i(s(c)):c,_=new URLSearchParams({baseUrl:e,id:y,type:l,path:m});if(p&&_.set("workspace",p),f&&_.set("tool",f),a&&_.set("projectId",a),u&&_.set("dataset",u),h(o)||g(o)){if(g(o)){let t=function(t){if(!g(t))return;let[e,n,...r]=t.split(".");return n}(o);_.set("perspective",t)}}else _.set("perspective","published");let v=["/"===e?"":e];p&&v.push(p);let k=["mode=presentation","id=".concat(y),"type=".concat(l),"path=".concat(encodeURIComponent(m))];return f&&k.push("tool=".concat(f)),v.push("intent","edit","".concat(k.join(";"),"?").concat(_)),v.join("/")}({baseUrl:p,workspace:f,tool:m,id:_,type:v,path:l,...!n.omitCrossDatasetReferenceData&&{dataset:E,projectId:k}})},!1)});if(w){let t=x.skipped.length,e=x.encoded.length;if((t||e)&&(null===(u=(null==w?void 0:w.groupCollapsed)||w.log)||void 0===u||u("[@sanity/client]: Encoding source map into result"),null===(f=w.log)||void 0===f||f.call(w,"[@sanity/client]: Paths encoded: ".concat(x.encoded.length,", skipped: ").concat(x.skipped.length))),x.encoded.length>0&&(null==w||null===(m=w.log)||void 0===m||m.call(w,"[@sanity/client]: Table of encoded paths"),null===(_=(null==w?void 0:w.table)||w.log)||void 0===_||_(x.encoded)),x.skipped.length>0){let t=new Set;for(let{path:e}of x.skipped)t.add(e.replace(o,"0").replace(/\[\d+\]/g,"[]"));null==w||null===(k=w.log)||void 0===k||k.call(w,"[@sanity/client]: List of skipped paths",[...t.values()])}(t||e)&&(null==w||null===(v=w.groupEnd)||void 0===v||v.call(w))}return j}var k=Object.freeze({__proto__:null,stegaEncodeSourceMap:v})}}]);